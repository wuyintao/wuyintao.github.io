(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d0aec48"],{"1b62":function(e,t,r){"use strict";var s=r("2f4d");t["a"]={data:function(){return{page:{currentPage:1,size:10,total:0,pageSizes:[10,15,20,25,30,35,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"loading.....",spinner:"el-icon-loading"},uploadUrl:"https://leju.bufan.cloud/lejuAdmin/material/uploadFileOss"}},computed:{headers:function(){var e=Object(s["a"])(),t={token:e};return t}},methods:{centre:function(){return"text-align:center"}}}},"315e":function(e,t,r){"use strict";r("91ac")},"91ac":function(e,t,r){},b775:function(e,t,r){"use strict";r("3900"),r("195b");var s=r("f753"),a=r.n(s),n=r("b705"),o=r("2f4d"),l=r("a18c"),i=a.a.create({baseURL:"https://leju.bufan.cloud",timeout:5e3});i.interceptors.request.use((function(e){return e.headers["token"]=Object(o["a"])(),e}),(function(e){return console.log(e),Promise.reject(e)})),i.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(n["Message"])({message:t.message||"Error",type:"error",duration:3e3}),20002===t.code&&(Object(n["Message"])({message:"token过期,请重新登录!",type:"error",duration:3e3}),localStorage.clear(),l["a"].push("/")),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(n["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=i},de81:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"account"},[r("div",{staticClass:"margin_30 top"},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[e._v("用户搜索")]),r("el-form",{staticClass:"demo-form-inline",attrs:{size:"small",inline:!0,model:e.form}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{label:"昵称"}},[r("el-input",{attrs:{placeholder:"昵称"},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1)],1),r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",[r("el-button",{attrs:{type:"primary"}},[e._v("搜 索")]),r("el-button",[e._v("重 置")])],1)],1)],1)],1)],1)],1),r("div",{staticClass:"margin_30 main"},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addUser}},[e._v("新 增")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":e.centre,"cell-style":e.centre,data:e.list,border:""}},[r("el-table-column",{attrs:{fixed:"",type:"index",label:"#",width:"50"}}),r("el-table-column",{attrs:{fixed:"",prop:"username",label:"用户名",width:"100"}}),r("el-table-column",{attrs:{prop:"nick_name",label:"昵称",width:"180"}}),r("el-table-column",{attrs:{label:"头像",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.salt?r("img",{staticStyle:{width:"60px",height:"60px"},attrs:{src:t.row.salt}}):e._e()]}}])}),r("el-table-column",{attrs:{prop:"roles",label:"角色",width:"180"}}),r("el-table-column",{attrs:{prop:"create_time",label:"添加时间",width:"180"}}),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(r){return e.editUser(t.row.id)}}},[e._v("编 辑")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.delUser(t.row.id)}}},[e._v("删 除")])]}}])})],1),r("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.page.currentPage,"page-sizes":e.page.sizes,"page-size":e.page.size,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"userForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.userForm,rules:e.rules,size:"small"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24,offset:0}},[r("el-form-item",{attrs:{prop:"username",label:"用户名"}},[r("el-input",{attrs:{placeholder:"用户名"},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24,offset:0}},[r("el-form-item",{attrs:{prop:"nickname",label:"用户昵称"}},[r("el-input",{attrs:{placeholder:"用户昵称"},model:{value:e.userForm.nickname,callback:function(t){e.$set(e.userForm,"nickname",t)},expression:"userForm.nickname"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24,offset:0}},[r("el-form-item",{attrs:{prop:"password",label:"密码"}},[r("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24,offset:0}},[r("el-form-item",{attrs:{label:"用户头像"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,headers:e.headers,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.userForm.salt?r("img",{staticClass:"avatar",attrs:{src:e.userForm.salt}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24,offset:0}},[r("el-form-item",{attrs:{prop:"roleIds",label:"选择角色"}},[r("el-select",{attrs:{placeholder:"选择角色",clearable:"",multiple:""},model:{value:e.userForm.roleIds,callback:function(t){e.$set(e.userForm,"roleIds",t)},expression:"userForm.roleIds"}},e._l(e.roleList,(function(e,t){return r("el-option",{key:t,attrs:{value:e.id,label:e.roleName}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{staticStyle:{display:"flex","justify-content":"center"},attrs:{span:24,offset:0}},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.sureSubmit}},[e._v("确 定")])],1)],1)],1)],1)],1)},a=[],n=r("1b62"),o=(r("1ad7"),r("b775"));function l(e,t,r){return Object(o["a"])({url:"/admin/sysAuth/user/findUsersByPage/".concat(e,"/").concat(t),method:"post",data:r})}function i(e){return Object(o["a"])({url:"/admin/sysAuth/user/removeUser/".concat(e),method:"delete"})}function u(e){return Object(o["a"])({url:"/admin/sysAuth/user/saveUserRoles",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/admin/sysAuth/user/updateUserRoles",method:"put",data:e})}function d(e){return Object(o["a"])({url:"/admin/sysAuth/user/".concat(e),method:"get"})}var m=r("f345"),f={mixins:[n["a"]],data:function(){return{list:[],roleList:[],form:{nickName:"",username:""},userForm:{},dialogVisible:!1,dialogTitle:"",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],roleIds:[{required:!0,message:"请选择角色",trigger:"change"}]}}},components:{},computed:{},methods:{handleSizeChange:function(e){this.page.size=e},handleCurrentChange:function(e){this.page.currentPage=e},sureSubmit:function(){var e=this;this.$refs.userForm.validate((function(t){if(!t)return console.log("error submit!!"),e.$message.error("请填写完整!"),!1;e.userForm.id?c(e.userForm).then((function(t){console.log(t),t.success&&(e.$message.success("修改成功!"),e.dialogVisible=!1,e.init())})):u(e.userForm).then((function(t){console.log(t),t.success&&(e.$message.success("添加用户成功!"),e.dialogVisible=!1,e.init())}))}))},handleAvatarSuccess:function(e){this.userForm.salt=e.data.fileUrl},addUser:function(){this.dialogVisible=!0,this.dialogTitle="添加用户",this.userForm={createTime:"",id:"",isDeleted:!1,modifyTime:"",nickName:"",password:"",roleIds:[],salt:"",username:""}},editUser:function(e){var t=this;this.dialogTitle="修改用户",d(e).then((function(e){console.log(e),e.success&&(t.dialogVisible=!0,t.userForm=e.data.user)}))},delUser:function(e){var t=this;this.$confirm("删除用户不可恢复,继续吗?","警告!",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i(e).then((function(e){console.log(e),e.success&&(t.$message.success("已删除~"),t.init())}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},centre:function(){return"text-align:center"},init:function(){var e=this;l(this.page.currentPage,this.page.size).then((function(t){console.log("用户====",t),e.list=t.data.rows,e.page.total=t.data.total})),Object(m["a"])().then((function(t){console.log("角色====",t),e.roleList=t.data.items}))}},created:function(){this.init()},mounted:function(){}},p=f,g=(r("315e"),r("cba8")),h=Object(g["a"])(p,s,a,!1,null,"6e91a2be",null);t["default"]=h.exports},f345:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return i})),r.d(t,"f",(function(){return u})),r.d(t,"a",(function(){return a}));r("1ad7");var s=r("b775");function a(){return Object(s["a"])({url:"/admin/sysAuth/role/findAllRoles",method:"get"})}function n(e,t){return Object(s["a"])({url:"/admin/sysAuth/role/findRolesByPage/".concat(e,"/").concat(t),method:"get"})}function o(e){return Object(s["a"])({url:"/admin/sysAuth/role/findRolePermissions/".concat(e),method:"get"})}function l(e){return Object(s["a"])({url:"/admin/sysAuth/role/removeRole/".concat(e),method:"delete"})}function i(e){return Object(s["a"])({url:"/admin/sysAuth/role/saveRolePermissions",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/admin/sysAuth/role/updateRolePermissions",method:"put",data:e})}}}]);