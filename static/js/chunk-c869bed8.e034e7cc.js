(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c869bed8"],{b775:function(t,e,s){"use strict";s("3900"),s("195b");var a=s("f753"),n=s.n(a),i=s("b705"),r=s("2f4d"),o=s("a18c"),c=n.a.create({baseURL:"https://leju.bufan.cloud",timeout:5e3});c.interceptors.request.use((function(t){return t.headers["token"]=Object(r["a"])(),t}),(function(t){return console.log(t),Promise.reject(t)})),c.interceptors.response.use((function(t){var e=t.data;return 2e4!==e.code?(Object(i["Message"])({message:e.message||"Error",type:"error",duration:3e3}),20002===e.code&&(Object(i["Message"])({message:"token过期,请重新登录!",type:"error",duration:3e3}),localStorage.clear(),o["a"].push("/")),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){return console.log("err"+t),Object(i["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=c},bae6:function(t,e,s){"use strict";s("c94e")},c94e:function(t,e,s){},df9b:function(t,e,s){"use strict";s.d(e,"b",(function(){return n})),s.d(e,"a",(function(){return i})),s.d(e,"c",(function(){return r}));s("1ad7");var a=s("b775");function n(t,e){return Object(a["a"])({url:"/lejuAdmin/material/findMaterialByPage/".concat(t,"/").concat(e),method:"get"})}function i(t){return Object(a["a"])({url:"/lejuAdmin/material/delMaterial/".concat(t),method:"delete"})}function r(t){return Object(a["a"])({url:"/lejuAdmin/material/uploadFileOss",method:"post",data:t})}},ec17:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"material"},[s("div",{staticClass:"card margin_30"},[s("div",{staticClass:"head padding_20 bottomLine"},[s("el-upload",{staticClass:"upload-demo",attrs:{action:"https://leju.bufan.cloud/lejuAdmin/material/uploadFileOssSave",headers:t.headers,"on-success":t.uploadOver}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)],1),s("div",{staticClass:"body padding_20"},[s("el-row",{attrs:{gutter:20}},t._l(t.list,(function(e,a){return s("el-col",{key:a,staticStyle:{"margin-bottom":"20px",width:"20%"}},[s("el-card",[s("div",{staticClass:"top padding_20 bottomLine"},[t._v(" 上传时间: "+t._s(e.createTime)+" ")]),s("div",{staticClass:"padding_20"},[s("el-image",{staticStyle:{height:"250px"},attrs:{src:e.ossUrl}})],1),s("div",{staticClass:"bottom"},[s("el-button",{staticClass:"button",attrs:{type:"danger",size:"mini"},on:{click:function(s){return t.deleteMaterial(e.id)}}},[t._v("删除")])],1)])],1)})),1)],1),s("div",{staticClass:"foot padding_20"},[s("el-pagination",{attrs:{"current-page":t.start,"page-sizes":[10,20,30,40],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},n=[],i=s("df9b"),r=s("2f4d"),o={data:function(){return{token:"",list:[],total:0,start:1,limit:10,headers:{token:Object(r["a"])()}}},components:{},computed:{},methods:{uploadOver:function(t){console.log(t),console.log(t.success),t.success?(this.$message({message:t.message,type:"success"}),this.init()):this.$message({message:t.message,type:"error"})},deleteMaterial:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["a"])(t).then((function(t){console.log(t.message),t.success&&(e.$message({type:"success",message:"删除成功!"}),e.init())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleCurrentChange:function(t){this.start=t,this.init()},handleSizeChange:function(t){this.limit=t,this.init()},init:function(){var t=this;Object(i["b"])(this.start,this.limit).then((function(e){t.list=e.data.rows,t.total=e.data.total}))}},created:function(){this.init()},mounted:function(){}},c=o,l=(s("bae6"),s("cba8")),u=Object(l["a"])(c,a,n,!1,null,"406ec1f8",null);e["default"]=u.exports}}]);