(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a782c82"],{1174:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"detail"},[r("div",{staticClass:"top"},[r("el-steps",{staticClass:"steps",attrs:{space:300,active:t.stepCurrent-1,"align-center":!0,"process-status":"process","finish-status":"success"}},[r("el-step",{attrs:{title:"商品基本信息"}}),r("el-step",{attrs:{title:"添加库存信息"}}),r("el-step",{attrs:{title:"添加移动端详情"}})],1)],1),r("div",{staticClass:"margin_30"},[r("el-card",[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,inline:!0,size:"small","label-width":"100px"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:1==t.stepCurrent,expression:"stepCurrent == 1"}],staticClass:"step_model"},[r("div",{staticClass:"m_title"},[t._v("基本信息")]),r("div",{staticClass:"m_main"},[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{prop:"product.name",label:"商品名称"}},[r("el-input",{attrs:{clearable:"",placeholder:"商品名称"},model:{value:t.form.product.name,callback:function(e){t.$set(t.form.product,"name","string"===typeof e?e.trim():e)},expression:"form.product.name"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{prop:"product.productSn",label:"商品编码"}},[r("el-input",{attrs:{clearable:"",placeholder:"商品编码"},model:{value:t.form.product.productSn,callback:function(e){t.$set(t.form.product,"productSn",e)},expression:"form.product.productSn"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{prop:"product.productCategoryId",label:"商品分类"}},[r("el-select",{attrs:{placeholder:"商品分类",clearable:"",filterable:""},model:{value:t.form.product.productCategoryId,callback:function(e){t.$set(t.form.product,"productCategoryId",e)},expression:"form.product.productCategoryId"}},t._l(t.categoryList,(function(e){return r("el-option-group",{key:e.category.id,attrs:{label:e.category.name}},t._l(e.children,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)})),1)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{prop:"product.brandId",label:"商品品牌"}},[r("el-select",{attrs:{placeholder:"品牌",clearable:"",filterable:""},model:{value:t.form.product.brandId,callback:function(e){t.$set(t.form.product,"brandId",e)},expression:"form.product.brandId"}},t._l(t.brandList,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:16,offset:0}},[r("el-form-item",{attrs:{size:"small",label:"商品描述"}},[r("el-input",{staticStyle:{width:"600px"},attrs:{autosize:{minRows:3},type:"textarea"},model:{value:t.form.product.description,callback:function(e){t.$set(t.form.product,"description",e)},expression:"form.product.description"}})],1)],1)],1)],1),r("div",{staticClass:"m_title"},[t._v("商品属性")]),r("div",{staticClass:"m_main"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{prop:"product.originalPrice",label:"商品原价"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,label:"商品原价"},model:{value:t.form.product.originalPrice,callback:function(e){t.$set(t.form.product,"originalPrice",t._n(e))},expression:"form.product.originalPrice"}})],1)],1),r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{label:"促销类型"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"促销类型",clearable:""},model:{value:t.form.product.promotionType,callback:function(e){t.$set(t.form.product,"promotionType",e)},expression:"form.product.promotionType"}},t._l(t.promotionList,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{label:"活动价格"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:"",min:0,label:"活动价格"},model:{value:t.form.product.promotionPrice,callback:function(e){t.$set(t.form.product,"promotionPrice",e)},expression:"form.product.promotionPrice"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{prop:"product.weight",label:"重量(kg)"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,label:"商品原价"},model:{value:t.form.product.weight,callback:function(e){t.$set(t.form.product,"weight",t._n(e))},expression:"form.product.weight"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{label:"审核状态"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.swC},model:{value:t.form.product.verifyStatus,callback:function(e){t.$set(t.form.product,"verifyStatus",e)},expression:"form.product.verifyStatus"}})],1)],1),r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{label:"是否上架"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.swC},model:{value:t.form.product.publishStatus,callback:function(e){t.$set(t.form.product,"publishStatus",e)},expression:"form.product.publishStatus"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{prop:"product.pic",label:"缩略图"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.headers,action:"https://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",limit:1,"on-success":t.selectImg,"show-file-list":!1}},[t.form.product.pic?r("div",{staticClass:"avatar"},[r("img",{attrs:{src:t.form.product.pic}}),r("div",{staticClass:"msk"},[r("span",{staticClass:"msk_icon"},[r("i",{staticClass:"setin el-icon-zoom-in",on:{click:function(e){return e.stopPropagation(),t.handlePictureCardPreview(t.form.product.pic)}}})]),r("span",{staticClass:"msk_icon"},[r("i",{staticClass:"setin el-icon-delete",on:{click:function(e){return e.stopPropagation(),t.rmvIcon(e)}}})])])]):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)],1),r("div",{staticClass:"m_title"},[t._v("其它信息")]),r("div",{staticClass:"m_main"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{label:"推荐状态"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.swC},model:{value:t.form.product.recommendStatus,callback:function(e){t.$set(t.form.product,"recommendStatus",e)},expression:"form.product.recommendStatus"}})],1)],1),r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{label:"新品状态"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.swC},model:{value:t.form.product.newStatus,callback:function(e){t.$set(t.form.product,"newStatus",e)},expression:"form.product.newStatus"}})],1)],1),r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{label:"预告商品"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.swC},model:{value:t.form.product.previewStatus,callback:function(e){t.$set(t.form.product,"previewStatus",e)},expression:"form.product.previewStatus"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{label:"搜索关键词"}},[r("el-input",{staticStyle:{width:"100%"},model:{value:t.form.product.keywords,callback:function(e){t.$set(t.form.product,"keywords",e)},expression:"form.product.keywords"}})],1)],1),r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{prop:"product.lowStock",label:"库存预警"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,label:"库存预警"},model:{value:t.form.product.lowStock,callback:function(e){t.$set(t.form.product,"lowStock",e)},expression:"form.product.lowStock"}})],1)],1),r("el-col",{attrs:{span:8,offset:0}},[r("el-form-item",{attrs:{prop:"product.sort",label:"商品排序"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,label:"商品排序"},model:{value:t.form.product.sort,callback:function(e){t.$set(t.form.product,"sort",t._n(e))},expression:"form.product.sort"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:14,offset:0}},[r("el-form-item",{attrs:{label:"产品服务"}},[r("el-checkbox-group",{model:{value:t.form.product.serviceIds,callback:function(e){t.$set(t.form.product,"serviceIds",e)},expression:"form.product.serviceIds"}},[r("el-checkbox",{attrs:{label:"1"}},[t._v("无忧退货")]),r("el-checkbox",{attrs:{label:"2"}},[t._v("快速退款")]),r("el-checkbox",{attrs:{label:"3"}},[t._v("免费包邮")])],1)],1)],1)],1)],1)]),r("div",{directives:[{name:"show",rawName:"v-show",value:2==t.stepCurrent,expression:"stepCurrent == 2"}],staticClass:"step_model"},[r("div",{staticClass:"m_title"},[t._v("商品sku信息")]),r("div",{staticClass:"m_main"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{prop:"product.detailTitle",label:"标题"}},[r("el-input",{attrs:{placeholder:"标题"},model:{value:t.form.product.detailTitle,callback:function(e){t.$set(t.form.product,"detailTitle",e)},expression:"form.product.detailTitle"}})],1)],1),r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{prop:"product.subTitle",label:"副标题"}},[r("el-input",{attrs:{placeholder:"副标题"},model:{value:t.form.product.subTitle,callback:function(e){t.$set(t.form.product,"subTitle",e)},expression:"form.product.subTitle"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24,offset:0}},[r("el-form-item",{attrs:{label:"画册图片"}},[r("el-upload",{attrs:{headers:t.headers,action:"https://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",limit:5,"file-list":t.albumList,"on-success":t.upImgList,"on-preview":t.handlePictureCardPreview,"on-remove":t.picsRemove,"list-type":"picture-card"}},[r("i",{staticClass:"el-icon-plus"}),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过5张 ")])])],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24,offset:0}},[r("el-form-item",{attrs:{label:"sku设置"}},[t.colorList.length?r("el-row",[r("div",{staticStyle:{display:"flex"}},[r("span",{staticStyle:{"margin-right":"7px"}},[t._v(" 颜色: ")]),r("el-checkbox-group",{model:{value:t.colorCheckList,callback:function(e){t.colorCheckList=e},expression:"colorCheckList"}},t._l(t.colorList,(function(e,o){return r("el-checkbox",{key:o,attrs:{label:e}},[r("span",[t._v(t._s(e.value))]),r("el-button",{staticStyle:{color:"#f00","margin-left":"5px"},attrs:{type:"text"},on:{click:function(r){return r.stopPropagation(),t.delCell("colorList","colorCheckList",e.id)}}},[t._v("删除")])],1)})),1)],1)]):t._e(),t.sizeList.length?r("el-row",[r("div",{staticStyle:{display:"flex"}},[r("span",{staticStyle:{"margin-right":"7px"}},[t._v(" 大小: ")]),r("el-checkbox-group",{model:{value:t.sizeCheckList,callback:function(e){t.sizeCheckList=e},expression:"sizeCheckList"}},t._l(t.sizeList,(function(e,o){return r("el-checkbox",{key:o,attrs:{label:e}},[r("span",[t._v(t._s(e.value))]),r("el-button",{staticStyle:{color:"#f00","margin-left":"7px"},attrs:{type:"text"},on:{click:function(r){return r.stopPropagation(),t.delCell("sizeList","sizeCheckList",e.id)}}},[t._v("删除")])],1)})),1)],1)]):t._e(),r("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[r("el-input",{attrs:{clearable:"",placeholder:"颜色秒描述:例如红色"},model:{value:t.skuColor,callback:function(e){t.skuColor=e},expression:"skuColor"}}),r("el-button",{on:{click:function(e){return t.pushSkuOpt("colorList","skuColor")}}},[t._v("创建颜色选项")]),r("span",{staticStyle:{margin:"0 5px"}}),r("el-input",{attrs:{clearable:"",placeholder:"大小,尺寸"},model:{value:t.skuSize,callback:function(e){t.skuSize=e},expression:"skuSize"}}),r("el-button",{on:{click:function(e){return t.pushSkuOpt("sizeList","skuSize")}}},[t._v("创建大小选项")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createSku(!0)}}},[t._v("生成sku列表")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createSku(!1)}}},[t._v("新增sku")])],1)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24,offset:0}},[t.form.pmsSkuStockList.length?r("el-table",{attrs:{height:"400",border:"",data:t.form.pmsSkuStockList}},[r("el-table-column",{attrs:{fixed:"left",type:"index",label:"#",width:"60"}}),r("el-table-column",{attrs:{label:"图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",headers:t.headers,"show-file-list":!1,"on-success":function(r){return t.handlePicSuccess(r,e.row)},limit:1}},[e.row.pic?r("img",{staticClass:"avatar2",attrs:{src:e.row.pic}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon2"})])]}}],null,!1,3987125006)}),r("el-table-column",{attrs:{label:"颜色",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.spData[0]?r("el-input",{attrs:{size:"mini",placeholder:"颜色"},model:{value:e.row.spData[0].value,callback:function(r){t.$set(e.row.spData[0],"value",r)},expression:"scope.row.spData[0].value"}}):t._e()]}}],null,!1,1011524580)}),r("el-table-column",{attrs:{label:"大小",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.spData[1]?r("el-input",{attrs:{size:"mini",placeholder:"大小/尺寸"},model:{value:e.row.spData[1].value,callback:function(r){t.$set(e.row.spData[1],"value",r)},expression:"scope.row.spData[1].value"}}):t._e()]}}],null,!1,3024739343)}),r("el-table-column",{attrs:{label:"库存",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"自定义库存"},model:{value:e.row.stock,callback:function(r){t.$set(e.row,"stock",t._n(r))},expression:"scope.row.stock"}})]}}],null,!1,1327733394)}),r("el-table-column",{attrs:{label:"预警库存",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"预警库存"},model:{value:e.row.lowStock,callback:function(r){t.$set(e.row,"lowStock",r)},expression:"scope.row.lowStock"}})]}}],null,!1,4199792205)}),r("el-table-column",{attrs:{label:"锁定库存",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"锁定库存"},model:{value:e.row.lockStock,callback:function(r){t.$set(e.row,"lockStock",r)},expression:"scope.row.lockStock"}})]}}],null,!1,1348480683)}),r("el-table-column",{attrs:{label:"sku编码",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"自定义sku编码"},model:{value:e.row.skuCode,callback:function(r){t.$set(e.row,"skuCode",r)},expression:"scope.row.skuCode"}})]}}],null,!1,3036135123)}),r("el-table-column",{attrs:{label:"价格",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"价格,单位:元(￥)"},model:{value:e.row.price,callback:function(r){t.$set(e.row,"price",r)},expression:"scope.row.price"}})]}}],null,!1,698265471)}),r("el-table-column",{attrs:{label:"销量",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini"},model:{value:e.row.sale,callback:function(r){t.$set(e.row,"sale",r)},expression:"scope.row.sale"}})]}}],null,!1,3858817630)}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{staticStyle:{color:"#f00"},attrs:{type:"text"},on:{click:function(r){return t.delSkuInfo(e.row.id)}}},[t._v("删除")])]}}],null,!1,2057379429)})],1):t._e()],1)],1)],1)]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.stepCurrent>=3,expression:"stepCurrent >= 3"}],staticClass:"step_model"},[r("div",{staticClass:"m_title"},[t._v("详情描述")]),r("div",{staticClass:"m_main"},[r("el-form-item",{staticClass:"tsss",attrs:{label:"商品详情"}},[r("tinymce",{model:{value:t.form.product.detailHtml,callback:function(e){t.$set(t.form.product,"detailHtml",e)},expression:"form.product.detailHtml"}})],1),r("br"),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{staticStyle:{width:"600px"},attrs:{autosize:{minRows:3},type:"textarea"},model:{value:t.form.product.note,callback:function(e){t.$set(t.form.product,"note",e)},expression:"form.product.note"}})],1)],1)]),r("div",{staticClass:"submit"},[t.stepCurrent>1?r("el-button",{attrs:{size:"mini"},on:{click:t.stepPrev}},[t._v("返回上一步")]):t._e(),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.stepNext}},[t._v(t._s(t.nextBtn))])],1)])],1)],1),r("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("img",{attrs:{width:"100%",src:t.dialogImageUrl}})])],1)},i=[],s=(r("3900"),r("715b"),r("b5ce"),r("a357"),r("b315"),r("fc45"),r("2e4e"),r("1019"),r("cae3"),r("a678"),r("8256")),a=r("f8e9"),n=r("6dac"),l=r("c6a4"),c=r("2f4d"),u={data:function(){return{productId:"",stepCurrent:1,form:{product:{albumPics:"",brandId:"",brandName:"",createTime:"",deleteStatus:0,description:"",detailDesc:"",detailHtml:"",detailMobileHtml:"",detailTitle:"",feightTemplateId:"",giftGrowth:0,giftPoint:0,id:"",keywords:"",lowStock:0,modifyTime:"",name:"",newStatus:0,note:"",originalPrice:0,pic:"",previewStatus:0,price:0,productAttributeCategoryId:"",productCategoryId:"",productCategoryName:"",productSn:"",promotionEndTime:"",promotionPerLimit:0,promotionPrice:0,promotionStartTime:"",promotionType:0,publishStatus:0,recommendStatus:0,sale:0,serviceIds:["1","2","3"],sort:0,stock:0,subTitle:"",unit:"",usePointLimit:0,verifyStatus:0,weight:0},pmsSkuStockList:[]},brandList:[],categoryList:[],promotionList:[{id:0,name:"无促销使用原价"},{id:1,name:"使用促销价"},{id:2,name:"使用会员价"},{id:3,name:"使用阶梯价格"},{id:4,name:"使用满减价格"},{id:5,name:"限时购"}],dialogVisible:!1,dialogImageUrl:"",albumList:[],colorList:[],colorCheckList:[],sizeList:[],sizeCheckList:[],skuColor:"",skuSize:"",rules:{"product.name":[{required:!0,message:"请输入商品名称",trigger:"blur"}],"product.productSn":[{required:!0,message:"请输入商品编码",trigger:"blur"}],"product.productCategoryId":[{required:!0,message:"请选额商品分类",trigger:"change"}],"product.brandId":[{required:!0,message:"请选额品牌",trigger:"change"}],"product.originalPrice":[{required:!0,pattern:/1/,message:"商品原价要求为大于 0 的数值",trigger:"blur",transform:function(t){return t>0?"1":"0"}}],"product.weight":[{required:!0,pattern:/1/,message:"重量要求为大于 0 的数值",trigger:"blur",transform:function(t){return t>0?"1":"0"}}],"product.pic":[{required:!0,message:"请上传缩略图",trigger:"blur"}],"product.lowStock":[{required:!0,pattern:/1/,message:"库存预警要求为大于 0 的数值",trigger:"blur",transform:function(t){return t>0?"1":"0"}}],"product.sort":[{required:!0,pattern:/1/,message:"排序要求为大于 0 的数",trigger:"blur",transform:function(t){return t>0?"1":"0"}}],"product.detailTitle":[{required:!0,message:"请填写标题",trigger:"blur"}],"product.subTitle":[{required:!0,message:"请填写副标题",trigger:"blur"}]},stepOneValids:["product.name","product.productSn","product.productCategoryId","product.brandId","product.originalPrice","product.weight","product.pic","product.lowStock","product.sort"],stepTwoValids:["product.detailTitle","product.subTitle"]}},components:{tinymce:s["a"]},computed:{nextBtn:function(){var t="";switch(this.stepCurrent){case 1:t="下一步,编辑库存信息";break;case 2:t="下一步,添加移动端详情";break;case 3:t="提交保存";default:break}return t},headers:function(){var t=Object(c["a"])(),e={token:t};return e}},filters:{},methods:{swC:function(t){console.log(t)},createSku:function(t){var e=this;if(this.colorCheckList.length){var r,o=[];if(this.colorCheckList.forEach((function(t){e.sizeCheckList.length?e.sizeCheckList.forEach((function(e){o.push({createTime:"",id:"",lockStock:0,lowStock:0,modifyTime:"",pic:"",price:0,productId:"",promotionPrice:0,sale:0,skuCode:"",spData:[{key:"颜色",value:t.value},{key:"大小",value:e.value}],stock:0})})):o.push({createTime:"",id:"",lockStock:0,lowStock:0,modifyTime:"",pic:"",price:0,productId:"",promotionPrice:0,sale:0,skuCode:"",spData:[{key:"颜色",value:t.value},{key:"大小",value:""}],stock:0})})),t)this.$confirm("此操作将清空sku列表并生成新的列表, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.form.pmsSkuStockList=o,e.$message({type:"success",message:"删除成功!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}));else(r=this.form.pmsSkuStockList).push.apply(r,o)}else this.$message.warning("请选中颜色!")},delCell:function(t,e,r){console.log(r);var o=this[t].findIndex((function(t){return t.id==r}));this[t].splice(o,1);var i=this[e].findIndex((function(t){return t.id==r}));this[e].splice(i,1),console.log(this[t]),console.log(this[e])},pushSkuOpt:function(t,e){this[e]?(this[t].push({id:(new Date).getTime(),value:this[e]}),this[e]=""):this.$message.error("值不能为空!")},delSkuInfo:function(t){var e=this.form.pmsSkuStockList.findIndex((function(e){return e.id==t}));this.form.pmsSkuStockList.splice(e,1)},handlePicSuccess:function(t,e){console.log(t),console.log("row",e),e.pic=t.data.fileUrl},stepPrev:function(){this.stepCurrent--},stepNext:function(){var t=this;3==this.stepCurrent&&(this.form.pmsSkuStockList.forEach((function(t){return t.spData=JSON.stringify(t.spData)})),this.form.product.serviceIds=this.form.product.serviceIds.toString(),console.log(this.form),this.productId?Object(a["i"])(this.form).then((function(e){console.log(e),e.success&&(t.$message.success("数据更新成功!"),t.$router.push("/product/productList"))})):Object(a["a"])(this.form).then((function(e){console.log(e),e.success&&(t.$message.success("商品添加成功!"),t.$router.push("/product/productList"))})));var e=!0,r=[];1==this.stepCurrent?r=this.stepOneValids:2==this.stepCurrent&&(r=this.stepTwoValids),this.$refs.form.validateField(r,(function(t){""==t?(console.log("通过"),e=!0):(console.log(t),e=!1)})),e?this.stepCurrent++:this.$message.error("请核对表单信息!"),this.stepCurrent>3&&this.stepCurrent--},upImgList:function(t,e,r){t.success&&(this.albumList.push({url:t.data.fileUrl}),this.form.product.albumPics=this.albumList.map((function(t){return t.url})).join(","),console.log(this.form.product.albumPics))},picsRemove:function(t,e){console.log("res===>",t);var r=this.albumList.findIndex((function(e){return e.uid==t.uid}));this.albumList.splice(r,1),console.log("albumList======>",this.albumList)},selectImg:function(t,e,r){console.log(t),t.success?this.form.product.pic=t.data.fileUrl:this.$message.error(t.message||"Error")},rmvIcon:function(){this.form.product.pic=""},handlePictureCardPreview:function(t){console.log(t),t.url?this.dialogImageUrl=t.url:this.dialogImageUrl=t,this.dialogVisible=!0},init:function(){var t=this;Object(a["c"])(this.productId).then((function(e){console.log("商品========↓↓↓↓↓↓",e),e.data.product.serviceIds=e.data.product.serviceIds.split(",");var r=e.data.product.albumPics.split(",");r.forEach((function(e){t.albumList.push({url:e})})),t.form.product=e.data.product,e.data.skus.forEach((function(t){t.spData=JSON.parse(t.spData)})),t.form.pmsSkuStockList=e.data.skus})),Object(l["c"])().then((function(e){console.log("分类========↓↓↓↓↓↓",e),t.categoryList=e.data.items})),Object(n["c"])().then((function(e){console.log("品牌========↓↓↓↓↓↓",e),t.brandList=e.data.items}))}},created:function(){var t=this;this.$route.params.id?(this.productId=this.$route.params.id,this.init()):(Object(l["c"])().then((function(e){console.log("分类========↓↓↓↓↓↓",e),t.categoryList=e.data.items})),Object(n["c"])().then((function(e){console.log("品牌========↓↓↓↓↓↓",e),t.brandList=e.data.items})))},mounted:function(){}},d=u,p=(r("6579"),r("cba8")),m=Object(p["a"])(d,o,i,!1,null,"7dfe6c1d",null);e["default"]=m.exports},"2b1f":function(t,e,r){},"2e4e":function(t,e,r){"use strict";var o=r("c258"),i=r("a7c6"),s=r("6ef2"),a=r("448c"),n=r("c758"),l=i([].join),c=s!=Object,u=n("join",",");o({target:"Array",proto:!0,forced:c||!u},{join:function(t){return l(a(this),void 0===t?",":t)}})},6579:function(t,e,r){"use strict";r("fad6")},"6dac":function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return s})),r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return n})),r.d(e,"e",(function(){return l})),r.d(e,"f",(function(){return c}));r("1ad7");var o=r("b775");function i(){return Object(o["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}function s(t,e){return Object(o["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e),method:"get"})}function a(t){return Object(o["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function n(t){return Object(o["a"])({url:"/lejuAdmin/brand/delBrand/".concat(t),method:"delete"})}function l(t){return Object(o["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}},8256:function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[r("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),r("div",{staticClass:"editor-custom-btn-container"},[r("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1)])},i=[],s=(r("395d"),r("5467"),r("cae3"),r("5056"),r("3900"),r("715b"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"upload-container"},[r("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" Click upload ")])],1),r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" Cancel ")]),r("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" Confirm ")])],1)],1)}),a=[],n=(r("7bf6"),r("1019"),r("31d6"),r("31c2"),r("9093"),r("545e"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var r=e.uid,o=Object.keys(this.listObj),i=0,s=o.length;i<s;i++)if(this.listObj[o[i]].uid===r)return this.listObj[o[i]].url=t.files.file,void(this.listObj[o[i]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,r=Object.keys(this.listObj),o=0,i=r.length;o<i;o++)if(this.listObj[r[o]].uid===e)return void delete this.listObj[r[o]]},beforeUpload:function(t){var e=this,r=window.URL||window.webkitURL,o=t.uid;return this.listObj[o]={},new Promise((function(i,s){var a=new Image;a.src=r.createObjectURL(t),a.onload=function(){e.listObj[o]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},i(!0)}))}}}),l=n,c=(r("b3c5"),r("cba8")),u=Object(c["a"])(l,s,a,!1,null,"22d5d544",null),d=u.exports,p=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],m=p,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],h=f,b=r("66b1"),g=(r("195b"),[]);function v(){return window.tinymce}var k=function(t,e){var r=document.getElementById(t),o=e||function(){};if(!r){var i=document.createElement("script");i.src=t,i.id=t,document.body.appendChild(i),g.push(o);var s="onload"in i?a:n;s(i)}function a(e){e.onload=function(){this.onerror=this.onload=null;var t,r=Object(b["a"])(g);try{for(r.s();!(t=r.n()).done;){var o=t.value;o(null,e)}}catch(i){r.e(i)}finally{r.f()}g=null},e.onerror=function(){this.onerror=this.onload=null,o(new Error("Failed to load "+t),e)}}function n(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,r=Object(b["a"])(g);try{for(r.s();!(e=r.n()).done;){var o=e.value;o(null,t)}}catch(i){r.e(i)}finally{r.f()}g=null}}}r&&o&&(v()?o(null,r):g.push(o))},w=k,y=r("df9b"),S="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",C={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;w(S,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:h,menubar:this.menubar,plugins:m,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(r){e.value&&r.setContent(e.value),e.hasInit=!0,r.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",r.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},convert_urls:!1,images_upload_handler:function(t,e,r,o){o(0);var i=new FormData;i.append("file",t.blob()),Object(y["c"])(i).then((function(t){console.log(t),t.success?(e(t.data.fileUrl),o(100)):t.data.message}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){return window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},_=C,j=(r("ed9d"),Object(c["a"])(_,o,i,!1,null,"42175e0a",null));e["a"]=j.exports},a357:function(t,e,r){"use strict";var o=r("c258"),i=r("6904"),s=r("dabf"),a=r("b056"),n=r("3b32"),l=r("3c8e"),c=r("81d8"),u=r("8025"),d=r("47d2"),p=d("splice"),m=i.TypeError,f=Math.max,h=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var r,o,i,d,p,v,k=l(this),w=n(k),y=s(t,w),S=arguments.length;if(0===S?r=o=0:1===S?(r=0,o=w-y):(r=S-2,o=h(f(a(e),0),w-y)),w+r-o>b)throw m(g);for(i=c(k,o),d=0;d<o;d++)p=y+d,p in k&&u(i,d,k[p]);if(i.length=o,r<o){for(d=y;d<w-o;d++)p=d+o,v=d+r,p in k?k[v]=k[p]:delete k[v];for(d=w;d>w-o+r;d--)delete k[d-1]}else if(r>o)for(d=w-o;d>y;d--)p=d+o-1,v=d+r-1,p in k?k[v]=k[p]:delete k[v];for(d=0;d<r;d++)k[d+y]=arguments[d+2];return k.length=w-o+r,i}})},b3c5:function(t,e,r){"use strict";r("2b1f")},b5ce:function(t,e,r){"use strict";var o=r("c258"),i=r("4b45").findIndex,s=r("27ee"),a="findIndex",n=!0;a in[]&&Array(1)[a]((function(){n=!1})),o({target:"Array",proto:!0,forced:n},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s(a)},b775:function(t,e,r){"use strict";r("3900"),r("195b");var o=r("f753"),i=r.n(o),s=r("b705"),a=r("2f4d"),n=r("a18c"),l=i.a.create({baseURL:"https://leju.bufan.cloud",timeout:5e3});l.interceptors.request.use((function(t){return t.headers["token"]=Object(a["a"])(),t}),(function(t){return console.log(t),Promise.reject(t)})),l.interceptors.response.use((function(t){var e=t.data;return 2e4!==e.code?(Object(s["Message"])({message:e.message||"Error",type:"error",duration:3e3}),20002===e.code&&(Object(s["Message"])({message:"token过期,请重新登录!",type:"error",duration:3e3}),localStorage.clear(),n["a"].push("/")),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){return console.log("err"+t),Object(s["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=l},c6a4:function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return s})),r.d(e,"d",(function(){return a})),r.d(e,"b",(function(){return n}));var o=r("b775");function i(){return Object(o["a"])({url:"/lejuAdmin/category/getAllCategory",method:"get"})}function s(t){return Object(o["a"])({url:"/lejuAdmin/category/addCategory",method:"post",data:t})}function a(t){return Object(o["a"])({url:"/lejuAdmin/category/updateCategory",method:"post",data:t})}function n(t){return Object(o["a"])({url:"/lejuAdmin/category/delCategory/".concat(t),method:"delete"})}},df9b:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return s})),r.d(e,"c",(function(){return a}));r("1ad7");var o=r("b775");function i(t,e){return Object(o["a"])({url:"/lejuAdmin/material/findMaterialByPage/".concat(t,"/").concat(e),method:"get"})}function s(t){return Object(o["a"])({url:"/lejuAdmin/material/delMaterial/".concat(t),method:"delete"})}function a(t){return Object(o["a"])({url:"/lejuAdmin/material/uploadFileOss",method:"post",data:t})}},e7a9:function(t,e,r){},ed9d:function(t,e,r){"use strict";r("e7a9")},f8e9:function(t,e,r){"use strict";r.d(e,"d",(function(){return i})),r.d(e,"e",(function(){return s})),r.d(e,"f",(function(){return a})),r.d(e,"g",(function(){return n})),r.d(e,"h",(function(){return l})),r.d(e,"b",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"a",(function(){return d})),r.d(e,"i",(function(){return p}));r("1ad7");var o=r("b775");function i(t,e,r){return Object(o["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"post",data:r})}function s(t){return Object(o["a"])({url:"/lejuAdmin/product/switchNewStatus",method:"post",data:t})}function a(t){return Object(o["a"])({url:"/lejuAdmin/product/switchPublishStatus",method:"post",data:t})}function n(t){return Object(o["a"])({url:"/lejuAdmin/product/switchRecommandStatus",method:"post",data:t})}function l(t){return Object(o["a"])({url:"/lejuAdmin/product/switchVerifyStatus",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/lejuAdmin/product/del/".concat(t),method:"delete"})}function u(t){return Object(o["a"])({url:"/lejuAdmin/product/productSkusDetail/".concat(t),method:"get"})}function d(t){return Object(o["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"post",data:t})}function p(t){return Object(o["a"])({url:"/lejuAdmin/product/updateProductAndSkus",method:"post",data:t})}},fad6:function(t,e,r){}}]);