(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f8e34f8c"],{4668:function(t,e,a){"use strict";a("c043")},"4a85":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"margin_30 category"},[a("el-card",{staticStyle:{width:"100%"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("分类管理")])]),a("div",{staticClass:"part"},[a("div",{staticClass:"title"},[t._v("乐居分类:")]),t.showList?a("el-row",{attrs:{gutter:20}},t._l(t.showList,(function(e,s){return a("el-col",{key:e.id,staticStyle:{"margin-bottom":"20px"},attrs:{span:6,offset:0}},[s<4?a("el-card",{attrs:{shadow:"hover"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(e.name))])]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",headers:t.headers,"show-file-list":!1,"on-success":t.coverUpSuccess}},[e.icon?a("img",{staticStyle:{width:"100%",height:"200px"},attrs:{src:e.icon,alt:""},on:{click:function(a){return t.checkImg(e)}}}):a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.checkImg(e)}}},[t._v("上传图片")])],1)],1):t._e()],1)})),1):t._e()],1),a("div",{staticClass:"part"},[a("div",{staticClass:"title"},[t._v(" 全部分类: "),a("el-button",{staticStyle:{float:"right","margin-right":"50px"},attrs:{size:"small",type:"primary"},on:{click:t.addCategory}},[t._v("添加分类")])],1),a("div",[a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.listData,"row-key":"id",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"菜单名称",width:"130"}}),a("el-table-column",{attrs:{prop:"icon",label:"图标"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.icon?a("img",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.row.icon}}):t._e()]}}])}),a("el-table-column",{attrs:{prop:"name",label:"分类名称"}}),a("el-table-column",{attrs:{prop:"sort",label:"排序"}}),a("el-table-column",{attrs:{prop:"showStatus",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.showStatus?"显示":"不显示"))])]}}])}),a("el-table-column",{attrs:{prop:"navStatus",label:"导航栏展示"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.navStatus?"展示":"不展示"))])]}}])}),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.editCategory(e.row)}}},[t._v("编辑")]),a("span",{staticStyle:{margin:"0 3px"}}),a("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{onConfirm:function(a){return t.delCategory(e.row.id)}}},[a("el-button",{staticStyle:{color:"#f00"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)])]),a("el-dialog",{attrs:{title:"修改分类信息",visible:t.dialogVisible,width:"40%","close-on-click-modal":!1},on:{close:t.cancleEdit,"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{size:"small",rules:t.rules,model:t.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类等级:"}},[a("el-radio",{attrs:{disabled:!t.editStatus,label:0},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[t._v("一级分类")]),a("el-radio",{attrs:{disabled:!t.editStatus,label:1},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[t._v("二级分类")])],1),t.form.level?a("el-form-item",{attrs:{prop:"parentId",label:"一级分类"}},[a("el-select",{attrs:{placeholder:"请选择一级分类"},model:{value:t.form.parentId,callback:function(e){t.$set(t.form,"parentId",e)},expression:"form.parentId"}},t._l(t.listData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),a("el-form-item",{attrs:{label:"图标:"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",headers:t.headers,"show-file-list":!1,"on-success":t.handleUpSuccess}},[t.form.icon?a("img",{staticClass:"avatar",attrs:{src:t.form.icon}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{prop:"name",label:"分类名字:"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"排序:"}},[a("el-input",{model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{label:"显示状态"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.form.showStatus,callback:function(e){t.$set(t.form,"showStatus",e)},expression:"form.showStatus"}})],1),a("el-form-item",{attrs:{label:"导航栏显示"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.form.navStatus,callback:function(e){t.$set(t.form,"navStatus",e)},expression:"form.navStatus"}})],1),a("el-form-item",{attrs:{label:"描述:"}},[a("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.cancleEdit(!0)}}},[t._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveSubmit}},[t._v("保 存")])],1)],1)],1)},o=[],r=a("b49e"),l=(a("3900"),a("715b"),a("6072"),a("2f4d")),i=a("c6a4"),n={data:function(){return{listData:[],form:{},showList:[],dialogVisible:!1,editStatus:!1,rules:{name:[{required:!0,message:"请填写分类名字",trigger:"blur"}],parentId:[{required:!0,message:"选择一级分类",trigger:"change"}]}}},components:{},computed:{headers:function(){var t=Object(l["a"])(),e={token:t};return e}},methods:{checkImg:function(t){console.log(t),this.form=t},coverUpSuccess:function(t){t.success&&(this.form.icon=t.data.fileUrl,this.editStatus=!1,this.saveSubmit())},saveSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(e){if(t.editStatus)return void Object(i["a"])(t.form).then((function(e){console.log(e),e.success?(t.$message.success("保存成功!"),t.dialogVisible=!1,t.init()):(t.$message.erroe("保存失败!",e.message),t.dialogVisible=!1)}));Object(i["d"])(t.form).then((function(e){console.log(e),e.success?(t.$message.success("保存成功!"),t.dialogVisible=!1,t.init()):(t.$message.erroe("保存失败!",e.message),t.dialogVisible=!1)}))}else t.$message.error("请校验表单信息")}))},handleUpSuccess:function(t){t.success&&(this.form.icon=t.data.fileUrl)},cancleEdit:function(t){t&&this.$message.info("已取消"),this.dialogVisible=!1,this.init()},editCategory:function(t){this.form=t,this.editStatus=!1,this.dialogVisible=!0},delCategory:function(t){var e=this;Object(i["b"])(t).then((function(t){console.log(t),t.success&&(e.$message.success("删除成功!"),e.init())}))},addCategory:function(){this.editStatus=!0,this.dialogVisible=!0,this.form={createTime:"",description:"",icon:"",id:"",keywords:"",level:0,modifyTime:"",name:"",navStatus:0,parentId:"",productCount:0,productUnit:"",showStatus:0,sort:0}},init:function(){var t=this;Object(i["c"])().then((function(e){var a=[];e.data.items.forEach((function(e){a.push(Object(r["a"])(Object(r["a"])({},e.category),{},{children:e.children})),"乐居"===e.category.name&&(t.showList=e.children)})),t.listData=a}))}},created:function(){this.init()},mounted:function(){}},c=n,u=(a("4668"),a("cba8")),d=Object(u["a"])(c,s,o,!1,null,"31e8676c",null);e["default"]=d.exports},b775:function(t,e,a){"use strict";a("3900"),a("195b");var s=a("f753"),o=a.n(s),r=a("b705"),l=a("2f4d"),i=a("a18c"),n=o.a.create({baseURL:"https://leju.bufan.cloud",timeout:5e3});n.interceptors.request.use((function(t){return t.headers["token"]=Object(l["a"])(),t}),(function(t){return console.log(t),Promise.reject(t)})),n.interceptors.response.use((function(t){var e=t.data;return 2e4!==e.code?(Object(r["Message"])({message:e.message||"Error",type:"error",duration:3e3}),20002===e.code&&(Object(r["Message"])({message:"token过期,请重新登录!",type:"error",duration:3e3}),localStorage.clear(),i["a"].push("/")),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){return console.log("err"+t),Object(r["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=n},c043:function(t,e,a){},c6a4:function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return l})),a.d(e,"b",(function(){return i}));var s=a("b775");function o(){return Object(s["a"])({url:"/lejuAdmin/category/getAllCategory",method:"get"})}function r(t){return Object(s["a"])({url:"/lejuAdmin/category/addCategory",method:"post",data:t})}function l(t){return Object(s["a"])({url:"/lejuAdmin/category/updateCategory",method:"post",data:t})}function i(t){return Object(s["a"])({url:"/lejuAdmin/category/delCategory/".concat(t),method:"delete"})}}}]);