(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38818820"],{"1b62":function(e,t,r){"use strict";var a=r("2f4d");t["a"]={data:function(){return{page:{currentPage:1,size:10,total:0,pageSizes:[10,15,20,25,30,35,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"loading.....",spinner:"el-icon-loading"},uploadUrl:"https://leju.bufan.cloud/lejuAdmin/material/uploadFileOss"}},computed:{headers:function(){var e=Object(a["a"])(),t={token:e};return t}},methods:{centre:function(){return"text-align:center"}}}},"24a2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"margin_30 advert"},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.advDetail("new")}}},[e._v("新增")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":e.centre,"cell-style":e.centre,data:e.list,border:""}},[r("el-table-column",{attrs:{fixed:"left",type:"index",label:"序号",width:"80"}}),r("el-table-column",{attrs:{prop:"name",label:"广告名称",width:"100"}}),r("el-table-column",{attrs:{prop:"",label:"广告图片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.row.pic}})]}}])}),r("el-table-column",{attrs:{label:"时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",[e._v("开始:"+e._s(t.row.startTime))]),r("p",[e._v("结束:"+e._s(t.row.endTime))])]}}])}),r("el-table-column",{attrs:{prop:"clickCount",label:"点击数",width:"100"}}),r("el-table-column",{attrs:{prop:"orderCount",label:"下单数",width:"100"}}),r("el-table-column",{attrs:{prop:"type",label:"轮播位置",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(0==t.row.type?"首页轮播":""))])]}}])}),r("el-table-column",{attrs:{prop:"url",label:"链接地址",width:"180"}}),r("el-table-column",{attrs:{prop:"status",label:"上下线状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(0==t.row.status?"下线":"上线"))])]}}])}),r("el-table-column",{attrs:{prop:"note",label:"备注",width:"180"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.advDetail("edit",t.row)}}},[e._v("编辑")]),r("el-button",{staticStyle:{color:"#f00"},attrs:{type:"text"},on:{click:function(r){return e.rmvAdv(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),r("el-dialog",{attrs:{title:"广告详情",visible:e.dialogVisible,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{size:"small",inline:!0,model:e.form,rules:e.rules}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{prop:"name",label:"广告名称"}},[r("el-input",{attrs:{placeholder:"广告名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{placeholder:"备注"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{label:"排序"}},[r("el-input",{attrs:{placeholder:"排序"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1),r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{label:"产品数量"}},[r("el-input",{attrs:{placeholder:"产品数量"},model:{value:e.form.productCount,callback:function(t){e.$set(e.form,"productCount",t)},expression:"form.productCount"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{label:"链接"}},[r("el-input",{attrs:{placeholder:"链接"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1)],1),r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{label:"首页轮播位置"}},[r("el-select",{attrs:{placeholder:"首页轮播位置"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[r("el-option",{attrs:{value:0,label:"app首页轮播"}}),r("el-option",{attrs:{value:1,label:"无"}})],1)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{label:"开始时间"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1)],1),r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{label:"结束时间"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{label:"上下线状态"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{label:"图片"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.headers,action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.form.pic?r("img",{staticClass:"avatar",attrs:{src:e.form.pic}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.sureSubmit}},[e._v("确 定")])],1)],1)],1)},l=[],o=r("b775");function s(e){return Object(o["a"])({url:"/lejuAdmin/advertise/addAds",method:"post",data:e})}function n(){return Object(o["a"])({url:"/lejuAdmin/advertise/adsList",method:"get"})}function i(e){return Object(o["a"])({url:"/lejuAdmin/advertise/delAds/".concat(e),method:"delete"})}function c(e){return Object(o["a"])({url:"/lejuAdmin/advertise/updateAds",method:"post",data:e})}var u=r("1b62"),d={mixins:[u["a"]],data:function(){return{list:[],dialogVisible:!1,form:{},gen:"",rules:{name:[{required:!0,message:"请填写名称",trigger:"blur"}]}}},components:{},computed:{},methods:{sureSubmit:function(){var e=this,t=!1;this.$refs.form.validate((function(e){t=e})),t?"new"==this.gen?s(this.form).then((function(t){console.log(t),e.$message.success("添加成功!"),e.dialogVisible=!1,e.init()})):"edit"==this.gen&&c(this.form).then((function(t){console.log(t),e.$message.success("更新成功!"),e.dialogVisible=!1,e.init()})):this.$message.error("请校验表单!")},handleAvatarSuccess:function(e){console.log(e),this.form.pic=e.data.fileUrl},advDetail:function(e,t){this.gen=e,this.dialogVisible=!0,"new"==e?this.form={clickCount:0,createTime:"",endTime:"",id:"",modifyTime:"",name:"",note:"",orderCount:0,pic:"",productId:"",sort:0,startTime:"",status:0,type:0,url:"",productCount:""}:"edit"==e&&(this.form=t)},rmvAdv:function(e){var t=this;i(e).then((function(e){console.log(e),t.$message.success("删除成功!"),t.init()}))},centre:function(){return"text-align:center"},init:function(){var e=this;n().then((function(t){console.log(t),e.list=t.data.items}))}},created:function(){this.init()}},m=d,f=(r("4072"),r("cba8")),p=Object(f["a"])(m,a,l,!1,null,"15fdd72c",null);t["default"]=p.exports},4072:function(e,t,r){"use strict";r("a8ee")},a8ee:function(e,t,r){},b775:function(e,t,r){"use strict";r("3900"),r("195b");var a=r("f753"),l=r.n(a),o=r("b705"),s=r("2f4d"),n=r("a18c"),i=l.a.create({baseURL:"https://leju.bufan.cloud",timeout:5e3});i.interceptors.request.use((function(e){return e.headers["token"]=Object(s["a"])(),e}),(function(e){return console.log(e),Promise.reject(e)})),i.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(o["Message"])({message:t.message||"Error",type:"error",duration:3e3}),20002===t.code&&(Object(o["Message"])({message:"token过期,请重新登录!",type:"error",duration:3e3}),localStorage.clear(),n["a"].push("/")),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(o["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=i}}]);