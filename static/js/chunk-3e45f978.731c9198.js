(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e45f978"],{"28e09":function(t,e,n){"use strict";n("477e")},"477e":function(t,e,n){},"6dac":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return u})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return l}));n("1ad7");var a=n("b775");function o(){return Object(a["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}function r(t,e){return Object(a["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e),method:"get"})}function i(t){return Object(a["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/lejuAdmin/brand/delBrand/".concat(t),method:"delete"})}function s(t){return Object(a["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}},a357:function(t,e,n){"use strict";var a=n("c258"),o=n("6904"),r=n("dabf"),i=n("b056"),u=n("3b32"),s=n("3c8e"),l=n("81d8"),c=n("8025"),d=n("47d2"),f=d("splice"),p=o.TypeError,b=Math.max,h=Math.min,m=9007199254740991,S="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var n,a,o,d,f,w,k=s(this),v=u(k),g=r(t,v),y=arguments.length;if(0===y?n=a=0:1===y?(n=0,a=v-g):(n=y-2,a=h(b(i(e),0),v-g)),v+n-a>m)throw p(S);for(o=l(k,a),d=0;d<a;d++)f=g+d,f in k&&c(o,d,k[f]);if(o.length=a,n<a){for(d=g;d<v-a;d++)f=d+a,w=d+n,f in k?k[w]=k[f]:delete k[w];for(d=v;d>v-a+n;d--)delete k[d-1]}else if(n>a)for(d=v-a;d>g;d--)f=d+a-1,w=d+n-1,f in k?k[w]=k[f]:delete k[w];for(d=0;d<n;d++)k[d+g]=arguments[d+2];return k.length=v-a+n,o}})},b5ce:function(t,e,n){"use strict";var a=n("c258"),o=n("4b45").findIndex,r=n("27ee"),i="findIndex",u=!0;i in[]&&Array(1)[i]((function(){u=!1})),a({target:"Array",proto:!0,forced:u},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(i)},b775:function(t,e,n){"use strict";n("3900"),n("195b");var a=n("f753"),o=n.n(a),r=n("b705"),i=n("2f4d"),u=n("a18c"),s=o.a.create({baseURL:"https://leju.bufan.cloud",timeout:5e3});s.interceptors.request.use((function(t){return t.headers["token"]=Object(i["a"])(),t}),(function(t){return console.log(t),Promise.reject(t)})),s.interceptors.response.use((function(t){var e=t.data;return 2e4!==e.code?(Object(r["Message"])({message:e.message||"Error",type:"error",duration:3e3}),20002===e.code&&(Object(r["Message"])({message:"token过期,请重新登录!",type:"error",duration:3e3}),localStorage.clear(),u["a"].push("/")),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){return console.log("err"+t),Object(r["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=s},c437:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pro_list"},[n("div",{staticClass:"top padding_20"},[n("el-collapse",[n("el-collapse-item",{attrs:{title:"商品管理介绍",name:"1"}},[n("div",[t._v(" 商品管理模块可以对客户端的商品进行 增\\删\\改\\查等相关操作, 控制客户端商品的列表展示和商品详情 ")])])],1)],1),n("div",{staticClass:"margin_30"},[n("el-card",[n("el-collapse",[n("el-collapse-item",{attrs:{title:"条件查询"}},[n("div",[n("el-form",{attrs:{model:t.productInfo,inline:!0,size:"mini"}},[n("el-form-item",{attrs:{label:"商品名称"}},[n("el-input",{attrs:{placeholder:"商品名称/模糊查询"},model:{value:t.productInfo.name,callback:function(e){t.$set(t.productInfo,"name",e)},expression:"productInfo.name"}})],1),n("el-form-item",{attrs:{label:"商品货号"}},[n("el-input",{attrs:{placeholder:"商品货号"},model:{value:t.productInfo.productSn,callback:function(e){t.$set(t.productInfo,"productSn",e)},expression:"productInfo.productSn"}})],1),t.brandList.length?n("el-form-item",{attrs:{label:"品牌"}},[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:"品牌"},model:{value:t.productInfo.brandId,callback:function(e){t.$set(t.productInfo,"brandId",e)},expression:"productInfo.brandId"}},t._l(t.brandList,(function(t,e){return n("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),n("el-form-item",{attrs:{label:"上架状态"}},[n("el-select",{attrs:{clearable:"",placeholder:"上架状态"},model:{value:t.productInfo.publishStatus,callback:function(e){t.$set(t.productInfo,"publishStatus",e)},expression:"productInfo.publishStatus"}},t._l(t.publish,(function(t,e){return n("el-option",{key:e,attrs:{label:t.txt,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:"审核状态"}},[n("el-select",{attrs:{clearable:"",placeholder:"审核状态"},model:{value:t.productInfo.verifyStatus,callback:function(e){t.$set(t.productInfo,"verifyStatus",e)},expression:"productInfo.verifyStatus"}},t._l(t.verify,(function(t,e){return n("el-option",{key:e,attrs:{label:t.txt,value:t.id}})})),1)],1),n("el-form-item",{staticStyle:{float:"right"}},[n("el-button",{attrs:{"label-position":"right"},on:{click:t.resetEvents}},[t._v("重置")]),n("el-button",{attrs:{type:"primary"},on:{click:t.searchProduct}},[t._v("搜索")])],1)],1)],1)])],1)],1)],1),n("div",{staticClass:"margin_30"},[n("el-card",[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-button",{staticStyle:{float:"left",padding:"5px 10px"},attrs:{type:"primary"},on:{click:function(e){return t.editProduct(!1)}}},[t._v("新增")]),n("el-button",{staticStyle:{float:"left",padding:"5px 10px"},attrs:{type:"primary",loading:t.loadingStatus},on:{click:t.exportExcel}},[t._v("导出商品列表Excel文件")])],1),n("div",{staticClass:"body"},[n("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":t.headStyle,"cell-style":t.headStyle,data:t.productList,border:""}},[n("el-table-column",{attrs:{fixed:"left",type:"index",label:"序号",width:"60"}}),n("el-table-column",{attrs:{label:"商品图片",width:"130"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.pic,alt:""}})]}}])}),n("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"180"}}),n("el-table-column",{attrs:{prop:"price",label:"商品价格"}}),n("el-table-column",{attrs:{prop:"productCategoryName",label:"商品类别"}}),n("el-table-column",{attrs:{label:"标签",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(" 最新: "),n("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return t.changeSwitchStatus(n,e.row.id,t.fn[0])}},model:{value:e.row.newStatus,callback:function(n){t.$set(e.row,"newStatus",n)},expression:"scope.row.newStatus"}})],1),n("div",[t._v(" 推荐: "),n("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return t.changeSwitchStatus(n,e.row.id,t.fn[1])}},model:{value:e.row.recommendStatus,callback:function(n){t.$set(e.row,"recommendStatus",n)},expression:"scope.row.recommendStatus"}})],1)]}}])}),n("el-table-column",{attrs:{prop:"address",label:"标签2",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(" 发布: "),n("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return t.changeSwitchStatus(n,e.row.id,t.fn[2])}},model:{value:e.row.publishStatus,callback:function(n){t.$set(e.row,"publishStatus",n)},expression:"scope.row.publishStatus"}})],1),n("div",[t._v(" 审核: "),n("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return t.changeSwitchStatus(n,e.row.id,t.fn[3])}},model:{value:e.row.verifyStatus,callback:function(n){t.$set(e.row,"verifyStatus",n)},expression:"scope.row.verifyStatus"}})],1)]}}])}),n("el-table-column",{attrs:{label:"sku",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.editProductSku(e.row.id)}}},[t._v("编辑Sku")])]}}])}),n("el-table-column",{attrs:{prop:"weight",label:"重量(kg)"}}),n("el-table-column",{attrs:{prop:"sort",label:"排序"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.editProduct(e.row.id)}}},[t._v("编辑")]),n("el-button",{staticStyle:{color:"#f00"},attrs:{type:"text"},on:{click:function(n){return t.delProductEvents(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),n("div",{staticClass:"foot"},[n("el-pagination",{attrs:{"current-page":t.start,"page-sizes":[5,10,15,20,25,30,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),n("el-dialog",{attrs:{width:"85%",title:"sku列表",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[n("el-table",{attrs:{height:"360",border:"",data:t.skuData}},[n("el-table-column",{attrs:{fixed:"left",type:"index",label:"#",width:"60"}}),n("el-table-column",{attrs:{label:"图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-upload",{staticClass:"avatar-uploader",attrs:{disabled:e.row.editStatus,action:"https://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",headers:t.headers,"show-file-list":!1,"on-success":function(n,a,o){return t.handlePicSuccess(n,a,o,e.row)},limit:1}},[e.row.pic?n("img",{staticClass:"avatar",class:e.row.editStatus?"stop":"",attrs:{src:e.row.pic}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon",class:e.row.editStatus?"stop":""})])]}}])}),n("el-table-column",{attrs:{label:"颜色",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.spData[1]?n("el-input",{attrs:{disabled:e.row.editStatus,placeholder:"颜色"},model:{value:e.row.spData[0].value,callback:function(n){t.$set(e.row.spData[0],"value",n)},expression:"scope.row.spData[0].value"}}):t._e()]}}])}),n("el-table-column",{attrs:{label:"大小",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.spData[1]?n("el-input",{attrs:{disabled:e.row.editStatus,placeholder:"大小/尺寸"},model:{value:e.row.spData[1].value,callback:function(n){t.$set(e.row.spData[1],"value",n)},expression:"scope.row.spData[1].value"}}):t._e()]}}])}),n("el-table-column",{attrs:{label:"库存",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{disabled:e.row.editStatus,placeholder:"自定义库存"},model:{value:e.row.stock,callback:function(n){t.$set(e.row,"stock",t._n(n))},expression:"scope.row.stock"}})]}}])}),n("el-table-column",{attrs:{label:"预警库存",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{disabled:e.row.editStatus,placeholder:"预警库存"},model:{value:e.row.lowStock,callback:function(n){t.$set(e.row,"lowStock",t._n(n))},expression:"scope.row.lowStock"}})]}}])}),n("el-table-column",{attrs:{label:"锁定库存",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{disabled:e.row.editStatus,placeholder:"锁定库存"},model:{value:e.row.lockStock,callback:function(n){t.$set(e.row,"lockStock",t._n(n))},expression:"scope.row.lockStock"}})]}}])}),n("el-table-column",{attrs:{label:"sku编码",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{disabled:e.row.editStatus,placeholder:"自定义sku编码"},model:{value:e.row.skuCode,callback:function(n){t.$set(e.row,"skuCode",n)},expression:"scope.row.skuCode"}})]}}])}),n("el-table-column",{attrs:{label:"价格",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{disabled:e.row.editStatus,placeholder:"价格,单位:元(￥)"},model:{value:e.row.price,callback:function(n){t.$set(e.row,"price",t._n(n))},expression:"scope.row.price"}})]}}])}),n("el-table-column",{attrs:{label:"促销价格",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{disabled:e.row.editStatus,placeholder:"设置促销价格"},model:{value:e.row.promotionPrice,callback:function(n){t.$set(e.row,"promotionPrice",t._n(n))},expression:"scope.row.promotionPrice"}})]}}])}),n("el-table-column",{attrs:{label:"销量",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{disabled:""},model:{value:e.row.sale,callback:function(n){t.$set(e.row,"sale",t._n(n))},expression:"scope.row.sale"}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.editStatus?n("span",[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.editSkuinfo(e.row)}}},[t._v("编辑")]),n("el-button",{staticStyle:{color:"#f00"},attrs:{type:"text"},on:{click:function(n){return t.delSkuInfo(e.row.id)}}},[t._v("删除")])],1):t._e(),e.row.editStatus?t._e():n("span",[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.saveSkuInfo(e.row)}}},[t._v("保存")]),n("el-button",{staticStyle:{color:"#606266"},attrs:{type:"text"},on:{click:function(n){return t.cancleSkuInfo(e.row)}}},[t._v("取消")])],1)]}}])})],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.addSkuInfo}},[t._v("新增")]),n("el-button",{on:{click:t.cancleEdit}},[t._v("取消")])],1)],1)],1)],1)])},o=[],r=(n("3900"),n("31d6"),n("31c2"),n("1019"),n("b5ce"),n("a357"),n("b315"),n("715b"),n("f8e9")),i=n("6dac"),u=n("b775");function s(t){return Object(u["a"])({url:"/lejuAdmin/sku/getSkusByProductId/".concat(t),method:"get"})}function l(t){return Object(u["a"])({url:"/lejuAdmin/sku/delSku/".concat(t),method:"delete"})}function c(t){return Object(u["a"])({url:"/lejuAdmin/sku/addProductSkus",method:"post",data:t})}function d(t){return Object(u["a"])({url:"/lejuAdmin/sku/updateSkuInfo",method:"post",data:t})}var f=n("2f4d"),p={data:function(){return{publish:[{id:0,txt:"下架"},{id:1,txt:"上架"}],verify:[{id:0,txt:"未审核"},{id:1,txt:"审核通过"}],productInfo:{brandId:"",id:"",name:"",productCategoryId:"",productSn:"",publishStatus:"",verifyStatus:""},productList:[],brandList:[],start:1,limit:5,total:0,fn:[r["e"],r["g"],r["f"],r["h"]],dialogTableVisible:!1,innerVisible:!1,skuData:[],productId:"",tempEdit:{},loadingStatus:!1}},components:{},computed:{headers:function(){var t=Object(f["a"])(),e={token:t};return e}},methods:{exportExcel:function(){var t=this;Promise.all([n.e("chunk-747ad2be"),n.e("chunk-02eeb4c7"),n.e("chunk-2133cd4f")]).then(n.bind(null,"4bf8")).then((function(e){var n=["商品名称","商品品牌","商品价格"],a=["name","brandName","price"],o=t.productList,r=t.formatJson(a,o);e.export_json_to_excel({header:n,data:r,filename:"product-list",autoWidth:!0,bookType:"xlsx"})}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))},cancleSkuInfo:function(t){if(t.id){this.editProductSku(t.productId);this.skuData.findIndex((function(e){return e.id==t.id}))}else{var e=this.skuData.findIndex((function(e){return e.id==t.temp}));this.skuData.splice(e,1)}},handlePicSuccess:function(t,e,n,a){console.log(a),console.log(t.data.fileUrl),a.pic=t.data.fileUrl},addSkuInfo:function(){this.skuData.push({temp:(new Date).getTime(),editStatus:!1,createTime:"",id:"",lockStock:0,lowStock:0,modifyTime:"",pic:"",price:0,productId:this.productId,promotionPrice:0,sale:0,skuCode:"",spData:[{key:"颜色",value:""},{key:"容量",value:""}],stock:0})},saveSkuInfo:function(t){var e=this;console.log(t),t.spData=JSON.stringify(t.spData),t.id?d(t).then((function(n){if(console.log(n),n.success){e.$message.success("保存成功");var a=e.skuData.findIndex((function(e){return e.id==t.id}));e.skuData[a].editStatus=!0}})):c(t).then((function(t){t.success&&(e.$message.success("添加成功"),e.init(),s(e.productId).then((function(t){console.log(t),t.success&&(t.data.items.forEach((function(t){t.spData=JSON.parse(t.spData),t.editStatus=!0})),e.skuData=t.data.items,e.dialogTableVisible=!0)})))}));var n=this.skuData.findIndex((function(e){return e.id==t.id}));this.skuData[n].editStatus=!0},editSkuinfo:function(t){var e=this.skuData.findIndex((function(e){return e.id==t.id}));this.skuData[e].editStatus=!1},delSkuInfo:function(t){var e=this;console.log(t),this.$confirm("删除当前信息,可能导致购物车链接失效!, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l(t).then((function(t){t.success?(e.init(),e.$message.success("删除成功!"),s(e.productId).then((function(t){console.log(t),t.success&&(t.data.items.forEach((function(t){t.spData=JSON.parse(t.spData),t.editStatus=!0})),e.skuData=t.data.items,e.dialogTableVisible=!0)}))):e.$message.error("删除成功!")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},cancleEdit:function(){this.dialogTableVisible=!1},editProductSku:function(t){var e=this;this.productId=t,s(t).then((function(t){console.log(t),t.success&&(t.data.items.forEach((function(t){t.spData=JSON.parse(t.spData),t.editStatus=!0})),e.skuData=t.data.items,e.dialogTableVisible=!0)}))},editProduct:function(t){t?this.$router.push("productList/productDetail/".concat(t)):this.$router.push("productList/productDetail")},delProductEvents:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["b"])(t).then((function(t){t.success?(e.init(),e.$message.success("删除成功!")):e.$message.error("删除成功!")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},searchProduct:function(){this.init()},resetEvents:function(){this.productInfo={brandId:"",id:"",name:"",productCategoryId:"",productSn:"",publishStatus:"",verifyStatus:""}},changeSwitchStatus:function(t,e,n){var a=this;n({productId:e,status:t}).then((function(t){console.log(t),t.success?a.$message.success("状态更新成功!"):a.$message.error("状态更新失败!")}))},handleSizeChange:function(t){this.limit=t,this.init()},handleCurrentChange:function(t){this.start=t,this.init()},headStyle:function(){return"text-align:center"},init:function(){var t=this;Object(r["d"])(this.start,this.limit,this.productInfo).then((function(e){t.productList=e.data.rows,t.total=e.data.total})),Object(i["c"])().then((function(e){t.brandList=e.data.items}))}},created:function(){this.init()},mounted:function(){}},b=p,h=(n("28e09"),n("cba8")),m=Object(h["a"])(b,a,o,!1,null,"7598b8df",null);e["default"]=m.exports},f8e9:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return d})),n.d(e,"i",(function(){return f}));n("1ad7");var a=n("b775");function o(t,e,n){return Object(a["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"post",data:n})}function r(t){return Object(a["a"])({url:"/lejuAdmin/product/switchNewStatus",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/lejuAdmin/product/switchPublishStatus",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/lejuAdmin/product/switchRecommandStatus",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/lejuAdmin/product/switchVerifyStatus",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/lejuAdmin/product/del/".concat(t),method:"delete"})}function c(t){return Object(a["a"])({url:"/lejuAdmin/product/productSkusDetail/".concat(t),method:"get"})}function d(t){return Object(a["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/lejuAdmin/product/updateProductAndSkus",method:"post",data:t})}}}]);