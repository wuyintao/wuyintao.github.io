(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79f2c429"],{"0b02":function(t,e,a){},"1b62":function(t,e,a){"use strict";var r=a("2f4d");e["a"]={data:function(){return{page:{currentPage:1,size:10,total:0,pageSizes:[10,15,20,25,30,35,40]},loadingOption:{background:"rgba(255,255,255,.9)",text:"loading.....",spinner:"el-icon-loading"},uploadUrl:"https://leju.bufan.cloud/lejuAdmin/material/uploadFileOss"}},computed:{headers:function(){var t=Object(r["a"])(),e={token:t};return e}},methods:{centre:function(){return"text-align:center"}}}},"6dac":function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return l})),a.d(e,"e",(function(){return i})),a.d(e,"f",(function(){return c}));a("1ad7");var r=a("b775");function o(){return Object(r["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}function n(t,e){return Object(r["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e),method:"get"})}function s(t){return Object(r["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/lejuAdmin/brand/delBrand/".concat(t),method:"delete"})}function i(t){return Object(r["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}},b775:function(t,e,a){"use strict";a("3900"),a("195b");var r=a("f753"),o=a.n(r),n=a("b705"),s=a("2f4d"),l=a("a18c"),i=o.a.create({baseURL:"https://leju.bufan.cloud",timeout:5e3});i.interceptors.request.use((function(t){return t.headers["token"]=Object(s["a"])(),t}),(function(t){return console.log(t),Promise.reject(t)})),i.interceptors.response.use((function(t){var e=t.data;return 2e4!==e.code?(Object(n["Message"])({message:e.message||"Error",type:"error",duration:3e3}),20002===e.code&&(Object(n["Message"])({message:"token过期,请重新登录!",type:"error",duration:3e3}),localStorage.clear(),l["a"].push("/")),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){return console.log("err"+t),Object(n["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)})),e["a"]=i},c7fa:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"margin_30 brand"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.openEdit("addBrand")}}},[t._v("新增")])],1),a("el-table",{attrs:{"header-cell-style":t.center,"cell-style":t.center,height:"500",border:"",data:t.list}},[a("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"name",label:"品牌名称",width:"160"}}),a("el-table-column",{attrs:{prop:"showStatus",label:"展示状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" 是否展示: "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.changeStatus(e.row)}},model:{value:e.row.showStatus,callback:function(a){t.$set(e.row,"showStatus",a)},expression:"scope.row.showStatus"}})]}}])}),a("el-table-column",{attrs:{prop:"",label:"Logo",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"100%",height:"auto"},attrs:{src:t.row.logo}})]}}])}),a("el-table-column",{attrs:{prop:"",label:"专区大图",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"100%",height:"auto"},attrs:{src:t.row.bigPic}})]}}])}),a("el-table-column",{attrs:{prop:"brandStory",label:"品牌故事",width:"160"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"160"}}),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"60"}}),a("el-table-column",{attrs:{prop:"productCommentCount",label:"产品评论(条)",width:"120"}}),a("el-table-column",{attrs:{prop:"factoryStatus",label:"是否品牌制造商",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.factoryStatus?"不是":"是"))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.openEdit("updateBrand",e.row)}}},[t._v("编辑")]),a("el-button",{staticStyle:{color:"#f00"},attrs:{type:"text"},on:{click:function(a){return t.handleDelBrand(e.row.id)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{background:"","current-page":t.page.currentPage,"page-sizes":t.page.pageSizes,"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"品牌详情",visible:t.dialogVisible,width:"70%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"130px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{prop:"name",label:"品牌名称"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"首字母"}},[a("el-input",{model:{value:t.form.firstLetter,callback:function(e){t.$set(t.form,"firstLetter",e)},expression:"form.firstLetter"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"产品数量"}},[a("el-input",{model:{value:t.form.productCount,callback:function(e){t.$set(t.form,"productCount",e)},expression:"form.productCount"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"是否展示"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.form.showStatus,callback:function(e){t.$set(t.form,"showStatus",e)},expression:"form.showStatus"}})],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"是否为品牌制造商"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.form.factoryStatus,callback:function(e){t.$set(t.form,"factoryStatus",e)},expression:"form.factoryStatus"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{ovflow:"hidden"},attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"上传品牌Logo"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.headers,action:t.uploadUrl,"show-file-list":!1,"on-success":function(e){return t.handleSuccess(e,"logo")}}},[t.form.logo?a("img",{staticClass:"avatar",attrs:{src:t.form.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("el-form-item",{attrs:{label:"上传大区大图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.headers,action:t.uploadUrl,"show-file-list":!1,"on-success":function(e){return t.handleSuccess(e,"bigPic")}}},[t.form.bigPic?a("img",{staticClass:"avatar",attrs:{src:t.form.bigPic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24,offset:0}},[a("el-form-item",{attrs:{label:"品牌故事"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.brandStory,callback:function(e){t.$set(t.form,"brandStory",e)},expression:"form.brandStory"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleBrand}},[t._v("确 定")])],1)],1)],1)},o=[],n=a("6dac"),s=a("1b62"),l={mixins:[s["a"]],data:function(){return{list:[],form:{},dialogVisible:!1,handleStatus:"",rules:{name:[{required:!0,message:"请填写名称",trigger:"blur"}]}}},components:{},computed:{},methods:{handleSizeChange:function(t){console.log("每页数量",t),this.page.size=t,this.init()},handleCurrentChange:function(t){console.log("页数",t),this.page.currentPage=t,this.init()},changeStatus:function(t){var e=this;Object(n["e"])({id:t.id,status:t.showStatus}).then((function(t){console.log(t),t.success?e.$message.success("更新成功!"):(e.$message.error("更新失败!"),e.init())}))},handleDelBrand:function(t){var e=this;Object(n["b"])(t).then((function(t){console.log(t),t.success&&(e.$message.success("已删除"),e.init())}))},handleSuccess:function(t,e){console.log(t),console.log(e),t.success&&(this.form[e]=t.data.fileUrl)},handleBrand:function(){var t=this,e=!1;this.$refs.form.validate((function(a){a?e=!0:(e=!1,t.$message.error("请核验信息"))})),"updateBrand"==this.handleStatus&&e?Object(n["f"])(this.form).then((function(e){console.log(e),e.success?(t.$message.success("已更新"),t.dialogVisible=!1,t.init()):t.$message.error("更新失败!")})):"addBrand"==this.handleStatus&&e&&Object(n["a"])(this.form).then((function(e){console.log(e),e.success?(t.$message.success("添加成功"),t.dialogVisible=!1,t.init()):t.$message.error("添加失败!")}))},openEdit:function(t,e){this.handleStatus=t,"updateBrand"==t?this.form=e:"addBrand"==t&&(this.form={bigPic:"",brandStory:"",createTime:"",factoryStatus:0,firstLetter:"",id:"",logo:"",modifyTime:"",name:"",productCommentCount:0,productCount:0,showStatus:0,sort:0}),this.dialogVisible=!0},center:function(){return"text-align:center"},init:function(){var t=this;Object(n["d"])(this.page.currentPage,this.page.size).then((function(e){console.log(e),t.list=e.data.rows,t.page.total=e.data.total}))}},created:function(){this.init()},mounted:function(){}},i=l,c=(a("ea53"),a("cba8")),u=Object(c["a"])(i,r,o,!1,null,"623f6350",null);e["default"]=u.exports},ea53:function(t,e,a){"use strict";a("0b02")}}]);